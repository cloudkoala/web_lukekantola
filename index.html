<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>./Kantola/Luke</title>
  </head>
  <body>
    <header class="title-header">
      <h1>
        <span id="home-path"><span class="green-text">./</span>kantola<span class="green-text">/</span>luke</span><span id="current-section"></span>
      </h1>
      
      
      <!-- Hamburger Menu (always visible) -->
      <div class="hamburger-menu" id="hamburger-menu">
        <button class="hamburger-button" id="hamburger-button">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
        <nav class="hamburger-dropdown" id="hamburger-dropdown">
          <a href="#" id="hamburger-reel"><span class="green-text">./</span>reel</a>
          <a href="#" id="hamburger-projects"><span class="green-text">./</span>projects</a>
          <a href="#" id="hamburger-about"><span class="green-text">./</span>about</a>
          <a href="#" id="hamburger-contact"><span class="green-text">./</span>contact</a>
        </nav>
      </div>
    </header>
    
    <!-- Desktop Controls Container -->
    <div class="controls-container desktop-only">
      <div class="dropdown-row">
        <div class="model-selector">
          <select id="model-dropdown">
            <option value="castleton">Castleton Tower</option>
            <option value="corona_arch">Corona Arch</option>
            <option value="delicate_arch">Delicate Arch</option>
            <option value="fisher">Fisher Towers</option>
          </select>
        </div>
        <div class="quality-selector">
          <select id="quality-dropdown">
            <option value="low">Low Quality</option>
            <option value="high">High Quality</option>
          </select>
        </div>
      </div>
      
      <!-- Settings Button -->
      <div class="settings-button-container">
        <button id="settings-button" class="settings-button">settings</button>
      </div>
      
      <!-- Settings Panel (replaces button when open) -->
      <div id="settings-panel" class="settings-panel" style="display: none;">
        <button id="settings-close" class="settings-close-button">
          ×<span class="esc-hint">esc</span>
        </button>
        
        <div class="point-size-control" id="point-size-control">
          <label for="point-size">Point Size:</label>
          <input type="range" id="point-size" min="0.001" max="0.2" step="0.001" value="0.001">
          <span id="point-size-value">0.001</span>
        </div>
        
        <div class="sphere-radius-control" id="sphere-radius-control" style="display: none;">
          <label for="sphere-radius">Sphere Radius:</label>
          <input type="range" id="sphere-radius" min="0.001" max="0.05" step="0.001" value="0.01">
          <span id="sphere-radius-value">0.01</span>
        </div>
        <div class="focal-length-control">
          <label for="focal-length">Focal Length:</label>
          <input type="range" id="focal-length" min="10" max="200" step="1" value="50">
          <span id="focal-length-value">50</span>
        </div>
        <div class="fog-control">
          <label for="fog-density">Fog Density:</label>
          <input type="range" id="fog-density" min="0" max="0.5" step="0.001" value="0.003">
          <span id="fog-density-value">0.003</span>
        </div>
        <div class="sphere-controls">
          <div class="sphere-toggle-control">
            <label for="sphere-toggle">Sphere Mode:</label>
            <input type="checkbox" id="sphere-toggle" class="sphere-toggle-checkbox" checked>
            <label for="auto-rotate-toggle" class="auto-rotate-label">Auto-Rotate:</label>
            <input type="checkbox" id="auto-rotate-toggle" class="auto-rotate-checkbox" checked>
          </div>
        </div>
        <!-- Effects Panel (New Chaining System) -->
        <div id="effects-panel" class="effects-panel">
          <div class="effects-panel-header">
            <div class="effects-panel-title-row">
              <span class="effects-panel-collapse-arrow" id="effects-panel-collapse">▼</span>
              <label for="effects-main-dropdown">Effect:</label>
              <select id="effects-main-dropdown" class="effects-main-dropdown">
                <option value="none">None</option>
              </select>
              <button id="save-preset" class="save-preset-button" title="Save current effects as preset">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                  <polyline points="17,21 17,13 7,13 7,21"></polyline>
                  <polyline points="7,3 7,8 15,8"></polyline>
                </svg>
              </button>
            </div>
          </div>
          <div class="effects-panel-collapsible" id="effects-panel-collapsible">
            <div class="effects-panel-content" id="effects-panel-content">
              <div class="effects-chain-container">
                <div id="effects-chain" class="effects-chain">
                  <!-- Effect cards will be dynamically added here -->
                </div>
              </div>
              
              <div class="effect-parameters-container" style="display: none;">
                <div id="effect-parameters" class="effect-parameters">
                  <!-- Dynamic parameter controls will be added here -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Mobile Bottom Sheet -->
    <div class="mobile-bottom-sheet mobile-only" id="mobile-bottom-sheet">
      <!-- Bottom Sheet Handle -->
      <div class="bottom-sheet-handle" id="bottom-sheet-handle">
        <div class="handle-bar"></div>
        <span class="handle-text">Controls</span>
      </div>
      
      <!-- Bottom Sheet Content -->
      <div class="bottom-sheet-content" id="bottom-sheet-content">
        <!-- Model and Quality Selectors -->
        <div class="bottom-sheet-section">
          <div class="mobile-dropdown-row">
            <div class="mobile-model-selector">
              <select id="mobile-model-dropdown">
                <option value="castleton">Castleton Tower</option>
                <option value="corona_arch">Corona Arch</option>
                <option value="delicate_arch">Delicate Arch</option>
                <option value="fisher">Fisher Towers</option>
              </select>
            </div>
            <div class="mobile-quality-selector">
              <select id="mobile-quality-dropdown">
                <option value="low">Low Quality</option>
                <option value="high">High Quality</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- All Settings Controls -->
        <div class="bottom-sheet-section">
          
          <div class="mobile-point-size-control" id="mobile-point-size-control">
            <label for="mobile-point-size">Point Size:</label>
            <input type="range" id="mobile-point-size" min="0.001" max="0.2" step="0.001" value="0.001">
            <span id="mobile-point-size-value">0.001</span>
          </div>
          
          <div class="mobile-sphere-radius-control" id="mobile-sphere-radius-control" style="display: none;">
            <label for="mobile-sphere-radius">Sphere Radius:</label>
            <input type="range" id="mobile-sphere-radius" min="0.001" max="0.05" step="0.001" value="0.01">
            <span id="mobile-sphere-radius-value">0.01</span>
          </div>
          
          <div class="mobile-focal-length-control">
            <label for="mobile-focal-length">Focal Length:</label>
            <input type="range" id="mobile-focal-length" min="10" max="200" step="1" value="50">
            <span id="mobile-focal-length-value">50</span>
          </div>
          
          <div class="mobile-fog-control">
            <label for="mobile-fog-density">Fog Density:</label>
            <input type="range" id="mobile-fog-density" min="0" max="0.5" step="0.001" value="0.003">
            <span id="mobile-fog-density-value">0.003</span>
          </div>
          
          <div class="mobile-sphere-controls">
            <div class="mobile-sphere-toggle-control">
              <label for="mobile-sphere-toggle">Sphere Mode:</label>
              <input type="checkbox" id="mobile-sphere-toggle" class="sphere-toggle-checkbox" checked>
              <label for="mobile-auto-rotate-toggle" class="auto-rotate-label">Auto-Rotate:</label>
              <input type="checkbox" id="mobile-auto-rotate-toggle" class="auto-rotate-checkbox" checked>
            </div>
          </div>
          
          <!-- Effects Panel -->
          <div id="mobile-effects-panel" class="mobile-effects-panel">
            <div class="mobile-effects-panel-header">
              <div class="mobile-effects-panel-title-row">
                <label for="mobile-effects-main-dropdown">Effect:</label>
                <select id="mobile-effects-main-dropdown" class="mobile-effects-main-dropdown">
                  <option value="none">None</option>
                </select>
                <button id="mobile-save-preset" class="mobile-save-preset-button" title="Save current effects as preset">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                    <polyline points="17,21 17,13 7,13 7,21"></polyline>
                    <polyline points="7,3 7,8 15,8"></polyline>
                  </svg>
                </button>
              </div>
            </div>
            <div class="mobile-effects-panel-content" id="mobile-effects-panel-content">
              <div class="mobile-effects-chain-container">
                <div id="mobile-effects-chain" class="mobile-effects-chain">
                  <!-- Effect cards will be dynamically added here -->
                </div>
              </div>
              
              <div class="mobile-effect-parameters-container" style="display: none;">
                <div id="mobile-effect-parameters" class="mobile-effect-parameters">
                  <!-- Dynamic parameter controls will be added here -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Camera Info Display -->
    <div class="camera-info">
      <div class="camera-position-info">
        <label>Camera Position:</label>
        <div id="camera-position-display">X: 0.00, Y: 0.00, Z: 0.00</div>
      </div>
      <div class="camera-target-info">
        <label>Target:</label>
        <div id="camera-target-display">X: 0.00, Y: 0.00, Z: 0.00</div>
      </div>
    </div>
    
    <!-- Navigation indicators for home page (separate from controls) -->
    <div class="home-navigation" id="home-navigation">
      <div class="nav-indicator" data-mode="reel">
        <span class="nav-key">&lt;</span>
        <span class="nav-label"><span class="green-text">./</span><span class="white-text">reel</span></span>
      </div>
      <div class="nav-indicator" data-mode="projects">
        <span class="nav-label"><span class="green-text">./</span><span class="white-text">projects</span></span>
        <span class="nav-key">&gt;</span>
      </div>
    </div>
    
    <!-- Mobile Camera Reset Button -->
    <div class="mobile-camera-reset mobile-only" id="mobile-camera-reset">
      <button class="camera-reset-button" id="camera-reset-button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <!-- Camera body -->
          <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
          <!-- Camera lens -->
          <circle cx="12" cy="13" r="4"/>
        </svg>
      </button>
      <div class="camera-menu" id="camera-menu">
        <button class="camera-menu-option" id="reset-camera-option">Reset Camera</button>
        <button class="camera-menu-option" id="play-animation-option">Play Animation</button>
      </div>
    </div>

    <!-- Mobile Effects Button -->
    <div class="mobile-effects-button mobile-only" id="mobile-effects-button">
      <button class="effects-button" id="effects-button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <!-- Large four-pointed star (center-left) -->
          <path d="M10 3 L12 8 L17 10 L12 12 L10 17 L8 12 L3 10 L8 8 Z"/>
          <!-- Small four-pointed star (bottom right) -->
          <path d="M19 16 L20 18 L22 19 L20 20 L19 22 L18 20 L16 19 L18 18 Z"/>
        </svg>
      </button>
    </div>

    <!-- Mobile Trash Icon -->
    <div class="mobile-trash-icon mobile-only" id="mobile-trash-icon">
      <button class="trash-button" id="trash-button">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="3,6 5,6 21,6"></polyline>
          <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path>
          <line x1="10" y1="11" x2="10" y2="17"></line>
          <line x1="14" y1="11" x2="14" y2="17"></line>
        </svg>
      </button>
    </div>

    <!-- Mobile Horizontal Effects Panel -->
    <div class="mobile-horizontal-effects-panel mobile-only" id="mobile-horizontal-effects-panel">
      <div class="horizontal-effects-content">
        <div class="horizontal-effects-chain" id="horizontal-effects-chain">
          <!-- Effect cards will be dynamically added here horizontally -->
        </div>
      </div>
    </div>

    <!-- Mobile Effect Parameters Box -->
    <div class="mobile-effect-parameters-box mobile-only" id="mobile-effect-parameters-box" style="display: none;">
      <div class="parameters-box-header">
        <span class="parameters-box-title" id="parameters-box-title">Effect Parameters</span>
        <button class="parameters-box-close" id="parameters-box-close">×</button>
      </div>
      <div class="parameters-box-content" id="parameters-box-content">
        <!-- Dynamic parameter controls will be added here -->
      </div>
    </div>

    <!-- Navigation Help Text -->
    <div class="navigation-help" id="navigation-help">
      <span>click+drag == rotate</span>
      <span>double_click == adjust_rot_center</span>
      <span>cmd+click == move || two_finger_drag == move</span>
    </div>
    
    <!-- Content Area for Projects/About/Contact -->
    <div id="content-area" style="display: none;">
      <!-- Content will be dynamically loaded here -->
    </div>
    
    <canvas id="canvas"></canvas>
    
    <div id="progress" class="progress">
      <div class="progress-bar">
        <p>Loading scene...</p>
        <div class="progress-indicator">
          <div id="progress-fill" class="progress-fill"></div>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
